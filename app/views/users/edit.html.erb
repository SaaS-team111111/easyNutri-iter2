<h1>Edit User</h1>

<%= form_with model: @user, local: true do |f| %>
  <% if @user.errors.any? %>
    <div class="errors">
      <h3><%= pluralize(@user.errors.count, "error") %> prevented this user from being saved:</h3>
      <ul>
        <% @user.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name, "Name" %>
    <%= f.text_field :name, required: true %>
  </div>

  <div class="field">
    <%= f.label :height_cm, "Height (cm)" %>
    <%= f.number_field :height_cm %>
  </div>

  <div class="field">
    <%= f.label :weight_kg, "Weight (kg)" %>
    <%= f.number_field :weight_kg %>
  </div>

  <div class="field">
    <%= f.label :age, "Age" %>
    <%= f.number_field :age %>
  </div>

  <div class="field">
    <%= f.label :sex, "Sex" %>
    <%= f.select :sex, options_for_select([["Male", "M"], ["Female", "F"]], @user.sex), { include_blank: "Please select" } %>
  </div>

  <div class="actions">
    <%= f.submit "Update User", class: "button" %>
    <%= link_to "Delete User", user_path(@user), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this user? All associated meal plans will also be deleted." }, class: "button button-danger" %>
  </div>
<% end %>

<%= link_to "Back to Home", root_path, class: "link-back" %>

<style>
  form {
    max-width: 500px;
  }
  
  .field {
    margin-bottom: 20px;
  }
  
  label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }
  
  input[type="text"],
  input[type="number"],
  select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  
  .actions {
    display: flex;
    gap: 10px;
  }
  
  .button {
    padding: 10px 20px;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
  }
  
  .button:hover {
    background-color: #218838;
  }
  
  .button-danger {
    background-color: #dc3545;
  }
  
  .button-danger:hover {
    background-color: #c82333;
  }
  
  .errors {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 4px;
  }
  
  .errors h3 {
    margin-top: 0;
  }
  
  .link-back {
    display: inline-block;
    margin-top: 15px;
    color: #007bff;
    text-decoration: none;
  }
  
  .link-back:hover {
    text-decoration: underline;
  }
</style>

